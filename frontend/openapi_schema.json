{"openapi":"3.1.0","info":{"title":"Stack8s Backend API","description":"Multi-agent backend for AI-powered cloud workload deployment planning","version":"1.0.0"},"paths":{"/api/v1/chat/start":{"post":{"summary":"Start Chat","description":"Start a new chat conversation.\n\nReturns:\n    ChatStartResponse with conversation_id","operationId":"start_chat_api_v1_chat_start_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatStartResponse"}}}}}}},"/api/v1/chat/message":{"post":{"summary":"Send Message","description":"Send a message in a conversation and get assistant response.\n\nThis endpoint implements multi-turn conversation with two agents:\n1. Requirements Agent: Extracts WorkloadSpec or asks clarifications\n2. Architect Agent: Builds deployment plan using tools\n\nArgs:\n    request: ChatMessageRequest with conversation_id and message\n    \nReturns:\n    ChatMessageResponse with assistant's response","operationId":"send_message_api_v1_chat_message_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatMessageRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatMessageResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chat/{conversation_id}":{"get":{"summary":"Get Conversation","description":"Get full conversation history.\n\nArgs:\n    conversation_id: UUID of the conversation\n    \nReturns:\n    ConversationHistoryResponse with all messages","operationId":"get_conversation_api_v1_chat__conversation_id__get","parameters":[{"name":"conversation_id","in":"path","required":true,"schema":{"type":"string","title":"Conversation Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversationHistoryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/tools/compute/search":{"post":{"summary":"Debug Compute Search","description":"Debug endpoint for compute instance search.\n\nTest retrieval and ranking without running the full agent.\n\nArgs:\n    request: ComputeSearchRequest with filters\n    \nReturns:\n    ToolSearchResponse with results and metadata","operationId":"debug_compute_search_api_v1_tools_compute_search_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ComputeSearchRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ToolSearchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/tools/k8s/search":{"post":{"summary":"Debug K8S Search","description":"Debug endpoint for Kubernetes package search.\n\nTest retrieval and ranking without running the full agent.\n\nArgs:\n    request: K8sSearchRequest with query\n    \nReturns:\n    ToolSearchResponse with results and metadata","operationId":"debug_k8s_search_api_v1_tools_k8s_search_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/K8sSearchRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ToolSearchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/tools/hf/search":{"post":{"summary":"Debug Hf Search","description":"Debug endpoint for HuggingFace model search.\n\nTest RAG retrieval and ranking without running the full agent.\n\nArgs:\n    request: HFSearchRequest with query and filters\n    \nReturns:\n    ToolSearchResponse with results and metadata","operationId":"debug_hf_search_api_v1_tools_hf_search_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HFSearchRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ToolSearchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/health":{"get":{"summary":"Health Check","description":"Health check endpoint.","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/":{"get":{"summary":"Root","description":"Root endpoint with API information.","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"ChatMessageRequest":{"properties":{"conversation_id":{"type":"string","title":"Conversation Id"},"message":{"type":"string","title":"Message"}},"type":"object","required":["conversation_id","message"],"title":"ChatMessageRequest","description":"Request to send a message in a conversation."},"ChatMessageResponse":{"properties":{"conversation_id":{"type":"string","title":"Conversation Id"},"response":{"type":"string","title":"Response"},"response_type":{"type":"string","enum":["clarification","deployment_plan","error"],"title":"Response Type"},"deployment_plan":{"anyOf":[{"$ref":"#/components/schemas/DeploymentPlan"},{"type":"null"}]}},"type":"object","required":["conversation_id","response","response_type"],"title":"ChatMessageResponse","description":"Response from the assistant in a conversation."},"ChatStartResponse":{"properties":{"conversation_id":{"type":"string","title":"Conversation Id"},"message":{"type":"string","title":"Message","default":"Conversation started. How can I help you deploy your workload?"}},"type":"object","required":["conversation_id"],"title":"ChatStartResponse","description":"Response for starting a new chat conversation."},"ComputeSearchRequest":{"properties":{"gpu_needed":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Gpu Needed"},"min_vram_gb":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Min Vram Gb"},"gpu_model":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Gpu Model"},"max_price_monthly":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Max Price Monthly"},"provider":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Provider"},"region":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Region"},"min_vcpu":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Min Vcpu"},"min_ram_gb":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Min Ram Gb"},"top_k":{"type":"integer","title":"Top K","default":10}},"type":"object","title":"ComputeSearchRequest","description":"Request for compute instance search."},"ConversationHistoryResponse":{"properties":{"conversation_id":{"type":"string","title":"Conversation Id"},"messages":{"items":{"$ref":"#/components/schemas/ConversationMessage"},"type":"array","title":"Messages"}},"type":"object","required":["conversation_id","messages"],"title":"ConversationHistoryResponse","description":"Full conversation history."},"ConversationMessage":{"properties":{"id":{"type":"string","title":"Id"},"role":{"type":"string","enum":["user","assistant","system"],"title":"Role"},"content":{"type":"string","title":"Content"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","role","content","created_at"],"title":"ConversationMessage","description":"A single message in conversation history."},"DeploymentPlan":{"properties":{"understanding":{"type":"string","title":"Understanding"},"assumptions":{"items":{"type":"string"},"type":"array","title":"Assumptions"},"gpu_recommendations":{"items":{"$ref":"#/components/schemas/GPURecommendation"},"type":"array","title":"Gpu Recommendations"},"model_recommendations":{"items":{"$ref":"#/components/schemas/ModelRecommendation"},"type":"array","title":"Model Recommendations"},"kubernetes_stack":{"items":{"$ref":"#/components/schemas/K8sPackage"},"type":"array","title":"Kubernetes Stack"},"deployment_steps":{"items":{"type":"string"},"type":"array","title":"Deployment Steps"},"cost_estimate":{"type":"object","title":"Cost Estimate"},"tradeoffs":{"items":{"type":"string"},"type":"array","title":"Tradeoffs"},"local_cluster_available":{"type":"boolean","title":"Local Cluster Available","default":false}},"type":"object","required":["understanding","assumptions","gpu_recommendations","model_recommendations","kubernetes_stack","deployment_steps","cost_estimate","tradeoffs"],"title":"DeploymentPlan","description":"Complete deployment plan from Architect Agent."},"GPURecommendation":{"properties":{"rank":{"type":"integer","title":"Rank"},"provider":{"type":"string","title":"Provider"},"instance_name":{"type":"string","title":"Instance Name"},"gpu_model":{"type":"string","title":"Gpu Model"},"gpu_count":{"type":"integer","title":"Gpu Count"},"vram_per_gpu_gb":{"type":"integer","title":"Vram Per Gpu Gb"},"total_vram_gb":{"type":"integer","title":"Total Vram Gb"},"vcpu":{"type":"integer","title":"Vcpu"},"ram_gb":{"type":"number","title":"Ram Gb"},"price_monthly":{"type":"number","title":"Price Monthly"},"price_hourly":{"type":"number","title":"Price Hourly"},"regions":{"items":{"type":"string"},"type":"array","title":"Regions"},"reasoning":{"type":"string","title":"Reasoning"}},"type":"object","required":["rank","provider","instance_name","gpu_model","gpu_count","vram_per_gpu_gb","total_vram_gb","vcpu","ram_gb","price_monthly","price_hourly","regions","reasoning"],"title":"GPURecommendation","description":"A GPU instance recommendation."},"HFSearchRequest":{"properties":{"query":{"type":"string","title":"Query"},"pipeline_tag":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Pipeline Tag"},"license_filter":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"License Filter"},"top_k":{"type":"integer","title":"Top K","default":5}},"type":"object","required":["query"],"title":"HFSearchRequest","description":"Request for HuggingFace model search."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"K8sPackage":{"properties":{"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"version":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Version"},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"},"official":{"type":"boolean","title":"Official"},"stars":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Stars"},"reasoning":{"type":"string","title":"Reasoning"}},"type":"object","required":["name","description","version","category","official","stars","reasoning"],"title":"K8sPackage","description":"A Kubernetes/Bitnami package recommendation."},"K8sSearchRequest":{"properties":{"query":{"type":"string","title":"Query"},"top_k":{"type":"integer","title":"Top K","default":15}},"type":"object","required":["query"],"title":"K8sSearchRequest","description":"Request for Kubernetes package search."},"ModelRecommendation":{"properties":{"rank":{"type":"integer","title":"Rank"},"model_id":{"type":"string","title":"Model Id"},"pipeline_tag":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Pipeline Tag"},"license":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"License"},"downloads":{"type":"integer","title":"Downloads"},"likes":{"type":"integer","title":"Likes"},"relevance_score":{"type":"number","title":"Relevance Score"},"reasoning":{"type":"string","title":"Reasoning"}},"type":"object","required":["rank","model_id","pipeline_tag","license","downloads","likes","relevance_score","reasoning"],"title":"ModelRecommendation","description":"A HuggingFace model recommendation."},"ToolSearchResponse":{"properties":{"results":{"items":{"type":"object"},"type":"array","title":"Results"},"metadata":{"type":"object","title":"Metadata"}},"type":"object","required":["results","metadata"],"title":"ToolSearchResponse","description":"Generic tool search response."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}
